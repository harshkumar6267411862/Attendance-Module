<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Attendance Management System</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/main.css') }}">
</head>
<body>

<!-- ================= LOGIN PAGE ================= -->
<div id="login-page" class="page active">
    <div class="min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-blue-50">
        <div class="bg-white rounded-2xl shadow-lg p-8 max-w-md w-full border">
            <h1 class="text-3xl font-bold mb-2">Attendance</h1>
            <p class="text-sm text-gray-600 mb-6">Faculty Login</p>

            <form onsubmit="handleLogin(event)">
                <div class="mb-4">
                    <label class="text-sm font-semibold">Faculty ID</label>
                    <input id="login-faculty-id" required>
                </div>

                <div class="mb-6">
                    <label class="text-sm font-semibold">Password</label>
                    <input type="password" id="login-password" required>
                </div>

                <button type="submit" class="bg-blue-600 text-white w-full py-2 rounded-lg">
                    Log In
                </button>
            </form>
        </div>
    </div>
</div>

<!-- ================= CLASSES PAGE ================= -->
<div id="classes-page" class="page">
    <div class="min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-50">

        <div class="bg-gradient-to-r from-blue-600 to-blue-700 py-6">
            <div class="max-w-7xl mx-auto px-6 flex justify-between items-center">
                <h1 class="text-3xl font-bold text-white">My Classes</h1>
                <button onclick="handleLogout()" class="bg-blue-500 px-4 py-2 rounded-lg text-white">
                    Logout
                </button>
            </div>
        </div>

        <div class="max-w-7xl mx-auto px-6 py-12">

            <div class="bg-white p-6 rounded-2xl shadow border mb-10">
                <h2 class="font-semibold mb-4">Create Class</h2>
                <form onsubmit="handleCreateClass(event)" class="flex gap-4">
                    <input id="class-name-input" placeholder="Class name (e.g. 10A)" required>
                    <button type="submit" class="bg-blue-600 px-6 rounded-lg text-white">
                        Create
                    </button>
                </form>
            </div>

            <div id="classes-grid" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Loaded by JS -->
            </div>
        </div>
    </div>
</div>

<!-- ================= CLASS DETAIL PAGE ================= -->
<div id="class-detail-page" class="page">
    <div class="min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-50">

        <div class="bg-gradient-to-r from-blue-600 to-blue-700 py-6">
            <div class="max-w-7xl mx-auto px-6 flex justify-between items-center">
                <div class="flex items-center gap-4">
                    <button onclick="goToClasses()" class="text-white">← Back</button>
                    <h1 id="class-detail-name" class="text-3xl font-bold text-white"></h1>
                </div>

                <!-- MARK ATTENDANCE -->
                <button type="button"
                        onclick="goToAttendance()"
                        class="bg-white text-blue-600 px-6 py-2 rounded-lg font-semibold">
                    Mark Attendance
                </button>
            </div>
        </div>

        <div class="max-w-7xl mx-auto px-6 py-12">

            <button onclick="toggleAddStudent()"
                    class="bg-blue-600 text-white px-6 py-2 rounded-lg mb-6">
                Add Student
            </button>

            <div id="add-student-form" class="hidden bg-white p-6 rounded-2xl shadow border mb-8">
                <form onsubmit="handleAddStudent(event)">
                    <input id="stud-id-input" placeholder="Student ID" required>
                    <input id="roll-no-input" placeholder="Roll No" required>
                    <input id="name-input" placeholder="Name" required>

                    <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded-lg mt-4">
                        Save Student
                    </button>
                </form>
            </div>

            <div class="bg-white rounded-2xl shadow border overflow-hidden">
                <table>
                    <thead>
                        <tr>
                            <th>Roll</th>
                            <th>Name</th>
                            <th>ID</th>
                            <th class="text-right">Action</th>
                        </tr>
                    </thead>
                    <tbody id="students-tbody"></tbody>
                </table>
            </div>

        </div>
    </div>
</div>

<!-- ================= ATTENDANCE PAGE ================= -->
<div id="attendance-page" class="page">
    <div class="min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-50">

        <div class="bg-gradient-to-r from-blue-600 to-blue-700 py-6">
            <div class="max-w-4xl mx-auto px-6 flex items-center gap-4">
                <button onclick="showPage('class-detail-page')" class="text-white">← Back</button>
                <h1 class="text-3xl font-bold text-white">Mark Attendance</h1>
            </div>
        </div>

        <div class="max-w-4xl mx-auto px-6 py-12">

            <div class="bg-white p-4 rounded-xl shadow border mb-4 flex justify-between">
                <span id="attendance-total">Total: 0</span>
                <span id="attendance-present">Present: 0</span>
                <span id="attendance-absent">Absent: 0</span>
            </div>

            <div class="bg-white rounded-2xl shadow border overflow-hidden">
                <div id="attendance-list"></div>

                <div class="p-6 bg-gray-50 border-t">
                    <button type="button"
                            onclick="submitAttendance()"
                            class="bg-blue-600 w-full py-3 text-white rounded-lg">
                        Submit Attendance
                    </button>
                </div>
            </div>

        </div>
    </div>
</div>

<!-- JS -->
<script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>
